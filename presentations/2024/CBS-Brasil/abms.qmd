---
title: "Explorando o Potencial da Modelagem Baseada em Agentes"
author: "Eric Ara√∫jo"
format: 
    revealjs:
        theme: serif
        # background-color: "red"
        logo: ./imgs/logo.png
        footer: "19¬∫ CBS"
        history: false
---


## Quem sou eu?

:::: {.columns}

::: {.column width="30%"}
![](./imgs/foto-bw.png)

:::

::: {.column width="70%"}

Eric Ara√∫jo

  * Professor Associado da Calvin University (USA)
  * Coordenador BILbo (Behavioral Informatics Laboratory)
  * PhD pela Vrije Universiteit Amsterdam

:::

::::


## Agenda

1. O que √© Modelagem Baseada em Agentes?
2. Aplica√ß√µes Pr√°ticas da Modelagem Baseada em Agentes.
3. Orienta√ß√£o a Dados na Cria√ß√£o de Modelos
4. Aplica√ß√µes e Exemplos
5. Intera√ß√£o

## Solucionando Problemas

:::: {.columns}

::: {.column width="30%"}
![](./imgs/Albert_Einstein_Head.jpg)
:::
::: {.column width="70%"}


> "N√£o podemos resolver problemas usando o mesmo tipo de pensamento que usamos quando os criamos."
> 
> -- Albert Einstein

:::
::::

# 1. O que √© Modelagem Baseada em Agentes?

## 1
Modelagem baseada em agentes (MBAs) s√£o modelos onde **m√∫ltiplas entidades** percebem e respondem **estocasticamente** √†s condi√ß√µes do ambiente local, imitando  o comportamento de sistemas complexos de larga escala.

## 1.1 Criando MBAs

<!-- ::: {.fragment fragment-index=1} -->
::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-red fragment-index=2}
::: {.fragment .semi-fade-out fragment-index=3}
<u>**Do que a simula√ß√£o √© feita?**</u>

Agentes, objetos ou entidades que agem **autonomamente**.

:::
:::
:::

::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-red fragment-index=3}
::: {.fragment .semi-fade-out fragment-index=4}
<u>**Como os agentes interagem?**</u>

Os agentes acessam e interagem com o **ambiente local** por meio de **regras internas simples** para tomada de decis√µes, movimenta√ß√£o e a√ß√£o.
:::
:::
:::

::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-red fragment-index=4}
<!-- ::: {.fragment .semi-fade-out fragment-index=5} -->
<u>**O que √© analisado? **</u>

O **comportamento agregado** do sistema simulado √© o resultado da intensa intera√ß√£o entre os comportamentos relativamente simples de seus agentes individuais
<!-- ::: -->
:::
:::


## 1.2 Vantagens dos MBAs

::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-blue fragment-index=2}
::: {.fragment .semi-fade-out fragment-index=3}
1. **Visualiza√ß√£o gr√°fica** de comportamentos.
:::
:::
:::
::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-blue fragment-index=3}
::: {.fragment .semi-fade-out fragment-index=4}
2. Vantagens em **custo** e **tempo** em rela√ß√£o a experimentos do mundo real.
:::
:::
:::
::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-blue fragment-index=4}
3. Estudos onde n√£o √© poss√≠vel testes no mundo real.
:::
:::

# 2. Aplica√ß√µes pr√°ticas da modelagem baseada em agentes

---

<center><figure>

<img src="/presentations/2024/CBS-Brasil/imgs/Thesis-Cover.png" alt="" width="500"/>

</figure></center>


---

:::{.fragment .fade-in}
:::{.absolute top=0 left=0}
![](./imgs/book1.jpg){height=400px}
:::
:::

:::{.fragment .fade-in}
:::{.absolute top=0 left=350}
![](./imgs/book2.jpg){height=400px}
:::
:::

:::{.fragment .fade-in}
:::{.absolute top=0 left=700}
![](./imgs/book3.jpg){height=400px}
:::
:::

:::{.fragment .fade-in}
:::{.absolute top=300 left=50}
![](./imgs/book4.jpg){height=400px}
:::
:::

:::{.fragment .fade-in}
:::{.absolute top=300 left=400}
![](./imgs/book5.jpg){height=400px}
:::
:::

:::{.fragment .fade-in}
:::{.absolute top=300 left=750}
![](./imgs/book6.jpg){height=400px}
:::
:::


## 2.1 Trabalhos: Seguran√ßa p√∫blica

:::: {.columns}

::: {.column width="50%"}
![](./imgs/seguranca-publica.png)
:::

::: {.column width="50%"}
Raquel Ros√©s, Cristina Kadar, Nick Malleson, **A data-driven agent-based simulation to predict crime patterns in an urban environment**, Computers, Environment and Urban Systems, Volume 89, 2021, ISSN 0198-9715.
:::
::::

   <!-- 1. Groff, E.R. (2007) Simulation for Theory Testing and Experimentation: An Example Using Routine Activity Theory and Street Robbery -->

## 2.1 Trabalhos: For√ßas Armadas

:::: {.columns}

::: {.column width="50%"}
![](./imgs/militar.png)
:::

::: {.column width="50%"}
Yun, Woo-Seop, Moon, Il-Chul and Lee, Tae-Eog (2015). **Agent-Based Simulation of Time to Decide: Military Commands and Time Delays.** Journal of Artificial Societies and Social Simulation 18 (4) 10. doi: 10.18564/jasss.2871
:::
::::

<!-- Woo-Seop Yun, Il-Chul Moon and Tae-Eog Lee (2015) Agent-Based Simulation of Time to Decide: Military Commands and Time Delays -->

## 2.1 Trabalhos: Forma√ß√£o e Sociedade

:::: {.columns}

::: {.column width="50%"}
![](./imgs/formacao-familia.png)
:::

::: {.column width="50%"}
Sajjad, M., Singh, K., Paik, E., & Ahn, C. W. (2016). **A data-driven approach for agent-based modeling: Simulating the dynamics of family formation**. Journal of Artificial Societies and Social Simulation, 19(1), 9.
:::
::::



## 2.1 Trabalhos: Sa√∫de

:::: {.columns}

::: {.column width="50%"}
![](./imgs/saude.png)
:::

::: {.column width="50%"}
Hunter E, Mac Namee B, KelleheHunter E, Mac Namee B, Kelleher J (2018) An open-data-driven agent-based model to simulate infectious disease outbreaks. PLOS ONE 13(12): e0208775. https://doi.org/10.1371/journal.pone.0208775
:::
::::


## 2.2 Modelos Simples vs An√°lises Complexas

:::: {.columns}

::: {.column width="60%"}
![Origem: *Imagem criada com o uso de IA*](./imgs/estadio.png)
:::

::: {.column width="40%"}
**Evacua√ß√£o de est√°dios**

Modelo para uma multid√£o *vs* Modelo para um Agente
:::
::::


:::{.notes}
Considere o processo de pessoas deixando o est√°dio depois de um evento esportivo.
Desenvolver um modelo para uma multid√£o de indiv√≠duos seria algo complexo e tornaria qualquer mudan√ßa global no modelo dif√≠cil.

Ao inv√©s disso, um agente (no caso, uma pessoa) poderia receber uma s√©rie de regras simples:

- Tente ir para o port√£o de sa√≠da mais pr√≥ximo
- Se tiver muita gente na sua frente, tente se mover para a direita ou para a esquerda.
- Se tiver esperado um certo tempo sem conseguir se aproximar do port√£o, tente se movimentar para longe da multid√£o.
- Tente ficar pr√≥ximo das outras pessoas do seu grupo de fam√≠lia ou amigos.

:::


## 2.2 Modelos Simples vs An√°lises Complexas (Boids Model)

{{< video https://www.youtube.com/watch?v=X0sE10zUYyY width="100%" height="70%" >}}

:::{.notes}
Em 1987, Reynolds descreve tr√™s regras para o comportamento de p√°ssaros, conhecido como boids:

- preven√ß√£o de  colis√£o
- manuten√ß√£o de velocidade de acordo com os demais do grupo
- centralidade no grupo

-   **Separation:** If there are other boids immediately in front of you, turn away from them to avoid collisions and crowding.
-   **Alignment:** Turn to align with the average heading of nearby boids.
-   **Cohesion:** Attempt to stay close to nearby flockmates by steering toward the average position of neaby boids.


Essas regras s√£o simples de serem listadas, mas nem sempre f√°ceis de serem implementadas. Mas, uma vez que as regras foram criadas, fica f√°cil popular um modelo baseado em agentes tanto com um pequeno quanto grande grupo de agentes.
:::


## 2.2 Modelos Simples vs An√°lises Complexas (Agentes Adaptativos)

:::: {.columns}

::: {.column width="50%"}
![Origem: *Imagem criada com o uso de IA*](./imgs/universidade.png)
:::

::: {.column width="50%"}
**O caso das bicicletas na Holanda**

Regra √önica *vs* Agentes que Aprendem (Adaptam)
:::
::::

:::{.notes}

Al√©m disso, os agentes podem ser programados para aprender. Pode-se dar, por exemplo, 10 regras para um agente, e √† medida que ele verifica o sucesso ou n√£o de acordo com a regra escolhida, pesos diferentes s√£o dados para as escolhas.

Um exemplo seria o caso de um aumento na matr√≠cula de novos estudantes ao mesmo tempo em que h√° uma redu√ß√£o nos espa√ßos para estacionamento no campus. Nas primeiras semanas do ano acad√™mico, seria dif√≠cil de encontrar lugares para estacionar entre 7:00 e 09:00. Ap√≥s algumas semanas, algumas pessoas mudaram seu comportamento: 

- algumas chegam mais cedo para garantir um lugar perto do seu pr√©dio
- algumas chegam mais tarde, quando mais vagas s√£o encontradas √† medida que as aulas terminam e pessoas saem para almo√ßar
- outras estacionam fora do campus e caminham para evitar ter que procurar estacionamento
- outras come√ßam a pedalar ou usar o transporte p√∫blico.
:::


## 2.3 An√°lises Complexas


> ‚ÄúOs tr√™s objetivos prim√°rios de **experimentos computacionais** s√£o: 
> 
> (i) predizer a resposta para entradas novas, 
> (ii) otimizar a fun√ß√£o de par√¢metros de entradas, e 
> (iii) calibrar o c√≥digo do computador com dados reais.‚Äù
> 
> -- Sacks et al. (1989)

::: {.fragment .fade-up}
MBAs cumprem os 3 objetivos?
:::

:::{.notes}
O que nos faz pensar que a an√°lise de modelos simples √© complexa?

- ela requer uma forma diferente de an√°lise dos problemas tradicionais de simula√ß√£o

Sacks et al. (1989) fala sobre os tr√™s objetos principais de experimentos computacionais.
Infelizmente, para muitos modelos baseados em agentes, n√£o √© poss√≠vel atingir nenhum deles!
:::



# 3. Orienta√ß√£o a Dados na Cria√ß√£o de Modelos Baseados em Agentes


:::{.notes}
A MBA vem ganhando bastante proje√ß√£o nas √∫ltimas d√©cadas, pela sua capacidade de correspond√™ncia ontol√≥gica um-para-um entre o modelo e o mundo real.

Tamb√©m permite que processos paralelos, intera√ß√µes n√£o-lineares e heterogeneidade de sistemas sociais que dificilmente s√£o capturados em outros tipos de  modelagem.
:::

## Modelos Emp√≠ricos vs Modelos Abstratos

**A constante inquieta√ß√£o para a valida√ß√£o dos modelos.**

![Origem: *Imagem criada com o uso de IA*](./imgs/dados.png)


:::{.notes}

Perguntas de pesquisa que demandam acur√°cia na predi√ß√£o necessitam de dados.

Por√©m, perguntas investigativas para avalia√ß√£o de teorias existentes, ou para cria√ß√£o de novas teorias, ou mesmo que demandam dados imposs√≠veis de serem obtidos, podem se utilizar de modelos abstratos, como o famoso modelo de Schelling de segrega√ß√£o.

Aa falta de disponibilidade de dados e a falta de qualidade dos dados faz com que modelos sejam criados em n√≠veis abstratos aceit√°veis.

- Falar da experi√™ncia ao trabalhar com esse tipo de pesquisa.

Com a emerg√™ncia do Big data, presenciamos um ponto de virada na constru√ß√£o de modelos baseados em agentes de cinco anos para c√°. Por√©m ainda estamos no processo...
:::

## Caracterizando os Dados usados em MBA 

![](./imgs/tipos-dados.png)


:::{.notes}
Tipo de dado:
qualitativo: entrevistas, grupos de foco, etnografia.

Medidas repetidas: a repeti√ß√£o de coleta de dados indica se √© poss√≠vel capturar mudan√ßas temporais nos dados emp√≠ricos.

A ideia √© verificar padr√µes ao longo do tempo em n√≠veis individuais e populacionais.

Longitudinal: mesmos sujeitos medidos
Cross-sectional: sujeitos diferentes medidos

Exemplo de estudos com h√°bitos de cigarro e PAL (physical Activity level)

Impacto no modelo: mostra como as mudan√ßas causadas dependem da forma como o dado √© usado.

Inicializa√ß√£o: o modelo n√£o √© alterado, mas apenas os valores dos atributos iniciais ou de ambiente das vari√°veis muda.

Modifica√ß√£o da estrutura: uma modifica√ß√£o rastre√°vel √© feita no modelo, como modificar a f√≥rmula que define a renda anual de cada agente usando dados para gerar uma regress√£o linear.

Gera√ß√£o de estrutura: a estrutura do modelo √© parcial ou completamente criada do zero. Dessa forma, mudan√ßas n√£o podem ser rastreadas.

CONSIDERA√á√ÉO DO AGENTE
N√≠vel populacional: dados de n√≠vel agregado, como os tipos dos agentes, distribui√ß√£o de probabilidades, percentuais indicando uma propriedade do agente ou a chance de um evento/a√ß√£o. Geralmente valores distribu√≠dos igualmente entre os agentes.
ex. Censo

Individual:  dados longitudinais alimentados a cada agente de forma √∫nica.
:::

## Uma proposta de modelagem orientada a dados

#### VIS√ÉO CONTEXTUAL (Kavak, Hamdi, et al., 2018) 

![](./imgs/flowchart1.png)

:::{.notes}
Modelo conceitual: descreve os detalhes do modelo em forma de texto ou diagramas

Fonte de dados: sistema ou reposit√≥rio que cont√©m os dados usados para os agentes.

Sistema de gera√ß√£o de agentes orientados a dados: √© o cora√ß√£o do m√©todo. A parte que pega os dados e o modelo conceitual para criar os agentes orientados a dados.

M√°quina de simula√ß√£o: roda os cen√°rios pr√©-especificados com os agentes gerados.

O MODELO CONCEITUAL do sistema deve conter, ao menos:

- uma declara√ß√£o de prop√≥sito, descrevendo o objetivo do modelo
- os tipos de agentes com seus atributos e assinaturas de comportamento
- o tipo do ambiente e as vari√°veis.

Exemplo do modelo das favelas e covid-19.
:::

## Uma proposta de modelagem orientada a dados

#### VIS√ÉO DE ALTO N√çVEL (Kavak, Hamdi, et al., 2018)

![](./imgs/flowchart2.png)

:::{.notes}
PREPARA√á√ÉO DOS DADOS: ciclo dos dados, desde a aquisi√ß√£o at√© o seu uso em passos seguintes.

Uso do KDD para processamento dos dados. Remo√ß√£o de ru√≠do, manuseio dos dados faltantes, transforma√ß√£o dos dados e remo√ß√£o de entradas n√£o usadas para a cria√ß√£o do comportamento e valores de atributo.

O processo de treinamento e ajuste dos atributos √© um passo opcional usado quando pelo menos um atributo de um agente precisa ser inicializado baseado na dispers√£o entre a popula√ß√£o do mundo real. Os dados s√£o passados por algum algoritmo de aprendizagem de m√°quina para inicializa√ß√£o dos atributos.
:::

## Uma proposta de modelagem orientada a dados 

#### VIS√ÉO INDIVIDUAL DA CRIA√á√ÉO DO AGENTE (Kavak, Hamdi, et al., 2018)

![](./imgs/flowchart3.png)

:::{.notes}
Na organiza√ß√£o e tratamento dos ATRIBUTOS:

- Inicializa√ß√£o direta: passa o valor pelos dois processos sem modifica√ß√£o
- Inicializa√ß√£o baseada em procura: usa uma tabela de busca para adequar o valor √† uma categoria. Por exemplo, idade vira faixa de idade.
- Inicializa√ß√£o baseada no modelo: organiza e transforma os dados em uma entrada para modelos de infer√™ncia (aprendizagem de m√°quina ou estat√≠stico).

Na gera√ß√£o de regras de COMPORTAMENTO

Organizar e transformar: os dados s√£o transformados para que cada a√ß√£o e par√¢metros relacionados se tornem um √∫nico registro. Esses registros ser√£o usados para treinar o modelo da m√°quina de aprendizagem. O modelo gerado √© encapsulado como uma fun√ß√£o e se torna uma fun√ß√£o do agente que reflete as regras de comportamento.
:::

# 4. Aplica√ß√µes de orienta√ß√£o a dados na cria√ß√£o de modelos baseados em agentes


## 4.1 Padr√µes de roubos de rua  na cidade de lavras

**Dados**

- Registros de ocorr√™ncias da PMMG
- Censo demogr√°fico da cidade de Lavras

## 4.1 Padr√µes de roubos de rua na cidade de Lavras (MG)

::: {.r-stack}
![](./imgs/map_lavras_center.png){.fragment width="600"}

![](./imgs/netlogo_map.png){.fragment width="700"}

:::

## 4.1 Padr√µes de roubos de rua na cidade de Lavras (MG)

![Cohen e Felson (1979): Crime concentrates in space and time and in between the targets.](./imgs/routine-activity-theory.jpg)

## 4.1 Padr√µes de roubos de rua na cidade de Lavras (MG)

![Ara√∫jo E, Gerritsen C. Creating a temporal pattern for street robberies using ABM and data from a small city in South East Brazil. InAgent-Based Modelling for Criminological Theory Testing and Development 2020 Nov 29 (pp. 146-166). Routledge.](./imgs/modelo.png)


## 4.1 Padr√µes de roubos de rua na cidade de Lavras (MG)

![](./imgs/comparison_emp_sim.png)

## 4.2 COVID-19 em contextos de desigualdade social 

**Dados**

- Censo demogr√°fico do Rio de Janeiro
- Dados do desenvolvimento da doen√ßa
- Dados socioeconomicos da regi√£o estudada (Copacabana, Ipanema e Complexo do Pav√£o-Pav√£ozinho)
- Dados do Minist√©rio da Sa√∫de sobre infraestrutura hospitalar 

## 4.2 COVID-19 em contextos de desigualdade social 

- Carga viral do indiv√≠duo infectado
- N√∫mero de contatos f√≠sicos
- Poss√≠veis graus de severidade da doen√ßa de acordo com as caracter√≠sticas do infectado
- A√ß√µes de distanciamento social, isolamento social, quarentena, lockdown
- Demografia do espa√ßo a ser modelado

## 4.2 COVID-19 em contextos de desigualdade social 

![Kl√¥h VP, Silva GD, Ferro M, Ara√∫jo E, de Melo CB, de Andrade Lima JR, Martins ER. The virus and socioeconomic inequality: An agent-based model to simulate and assess the impact of interventions to reduce the spread of COVID-19 in Rio de Janeiro, Brazil. Brazilian Journal of Health Review. 2020 Apr 26;3(2):3647-73.](./imgs/seir.png)

## 4.2 COVID-19 em contextos de desigualdade social 

![](./imgs/favela1.png)

## 4.2 COVID-19 em contextos de desigualdade social 

<!-- ![](./imgs/favela2.png) -->
![](./imgs/C1_full_screen.png)

## 4.3 Espalhamento de comportamento em redes sociais

- Modelo te√≥rico sobre ades√£o aos protocolos de sa√∫de em um cen√°rio de pandemia
- Considera√ß√£o do papel das ag√™ncias p√∫blicas de sa√∫de na ades√£o
- An√°lise de diferentes tipos de topologia para a rede de conex√µes

---

:::: {.columns}

::: {.column width="40%"}
![](./imgs/opinions.png)
:::

::: {.column width="60%"}

::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-blue fragment-index=2}
::: {.fragment .semi-fade-out fragment-index=3}
Aumento em **700\%** na opini√£o geral das pessoas em rela√ß√£o √† ades√£o aos protocolos de sa√∫de caso 10% da rede se torne completamente convencida de que os protocolos s√£o importantes e fazem diferen√ßa.
:::
:::
:::

::: {.fragment .fade-in fragment-index=1}
::: {.fragment .highlight-blue fragment-index=3}
<!-- ::: {.fragment .semi-fade-out fragment-index=4} -->
**80\%** de aumento na ades√£o se o governo lan√ßar campanhas para incentivar as pessoas a aderirem √†s medidas de cuidado com a sa√∫de e conten√ß√£o do v√≠rus.
<!-- ::: -->
:::
:::
:::
::::


## Conclus√µes

- MBAs s√£o de grande relev√¢ncia, e agora se potencializam com o uso de dados.
- V√°rios problemas que n√£o podem ser estudados por quest√µes √©ticas ou limita√ß√µes encontram espa√ßo neste √°rea de estudo.
- Modelar o mundo requer princ√≠pios √©ticos e responsabilidade na demonstra√ß√£o dos resultados.

## C. S. Lewis

> "Eu n√£o recebi nenhuma garantia de que qualquer coisa que possamos fazer erradicar√° o sofrimento. Acredito que **os melhores resultados** s√£o alcan√ßados por pessoas que trabalham silenciosamente em **objetivos limitados**, como a aboli√ß√£o do com√©rcio de escravos, a reforma prisional, leis trabalhistas ou o combate √† tuberculose, e n√£o por aqueles que acreditam ser capazes de alcan√ßar justi√ßa, sa√∫de ou paz universais. Penso que a arte de viver consiste em **enfrentar cada mal imediato da melhor maneira poss√≠vel**." (O Peso de Gl√≥ria)

# Obrigado!

üì© eric.araujo@calvin.edu

üåê ericaraujo.com